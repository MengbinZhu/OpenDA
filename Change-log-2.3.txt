Issue: ODA-447
BlackBox save/restore state for working dirs with subdirs

Issue: ODA-440
Added required projects to workspace

Fixed test for netcdf D3d his DataObject (temporary solution, DataObject will be removed, see ODA-455)

De-activated parts of wind tests that miss test data. To be re-activated once ODA-454 is solved.

Complete unit test for D3D map netcdf file (additional commit to commit 491)

Adjusted spaces in reference file, to avoid failing on spaces

Finished Work In Progress on test for D3D binary restart file (see commit 471)

Complete unit test for D3D map netcdf file (added in commit 466)

Fixed error in SimpleStochModelInstance that revealed itself when announcing observations was fixed (commit 427).

Minor textual adjustment in error message

If now items are available in the server, a warning is given

ODA-416 NoosTimeSeriesStochObserver should support time zone's, fix test

ODA-416 NoosTimeSeriesStochObserver to support time zone's, check that all time series have the same time zone

removed non-existing imports

ODA-416 NoosTimeSeriesStochObserver to support time zone's

ODA-450
Solved problems related to rounding errors with time
*Time.java now uses the user specified time precision
*Stoch model timestepping uses user specified time precision as well

Issue ODA-432:
D3d Map file has been in implemented in model_delft3d module; old (non-working) implementation in core not needed any more.

Issue: ODA-448
If an exchange item has no time stamp but contains "state" in its name, it is assumed to be valid for the current time.

Issue ODA-432:
D3d Map file has been in implemented in model_delft3d module; old (non-working) implementation in core not needed any more.

Issue ODA-432:
D3d Map file had been in implemented in model_delft3d module; old (non-working) implementation in core not needed any more.

Issue: ODA-447
Save/restore state now remove the subdirectory level. (Note: see resulting restriction on file names, mentioned in issue)

Issue: ODA-446
Restart not written any more at initial time step

ODA-439: add handle to an extra optional UCI file containing default initial values. These values will be used when an updated state contains NaN (-1.00E30).

Implementation of full modification of states through modification of the binary restart file

heat data file for EnKF 3d example with states

Implementation of partial modification of states through modification of the binary restart file

EnFK example for d3d 3d domain with partial states adjustment

Issue: ODA-432
Added test method to read bin file(work in progress)

binary and mapfile for testing

Implementation modification of binary restart files

Change settings for Martin.

Issue: ODA-432
Added method to convert double to bytes (work in progress)

Creating exchangeItems (arrays) for model states (waterlevel, temperature, velocity) from netcdf files

Issue: ODA-434
Delft3D wrapper. Fixed test d3d_3Dlake_calibration for linux

First EnFK with delft3d 3d domain (missing states, dummy object used in the mean time).

Implementation 2d wind exchange item and time for wind exchangeItem

Issue: ODA-434
Delft3D wrapper - working on kalman_estuary example. Not working yet!

Issue: ODA-434
Delft3d wrapper - working on kalman_estuary example. Not working yet.

First implementation of adjuster for binary restart file

Implementation of grid for 2D wind fields

Issue: ODA-434
Fixing delft3d tests. calibration_wind now working for linux.

Issue: ODA-434
Fix delft3d tests. calibration_river_roughness now working on linux

Issue: ODA-434
fixing tests for delft3d. calibration_estuary and calibration_estuary_dd are now working on linux.

Adding mdf test file

New example (twin experiment) with 3D model and temperature calibration

Reading writing converting start and stop times from mdf files

Handling of computed times in NetcdfD3dHisDataObject

Added the option of specifying lower and upper limits on a Bmi model.

Corrected writing of mdFiles

Data object for D3d his files

Data object for D3d mdf

Issue: ODA-432
Moved D3d netcdf DataObjects and tests to model_delft3d

Issue: ODA-432
Created testData directory for D3d netcdf tests

Issue: ODA-434
Convert calibration_estuary test for delft3d to netcdf history files.
Test is working for linux now.

Issue: ODA-432
Made Data Objects test namespace consistent with src namespace (step 2(b), adjust package names)

Issue: ODA-432
Made Data Objects test namespace consistent with src namespace (step 2, adjust package names)

Issue: ODA-432
Made Data Objects test namespace consistent with src namespace (step 1, rename dir.)

Issue: ODA-432
Fixed test result for Delft3D netcdf history file

Work in progress: next step data object for D3D map file (2D/time variables can be read now)

ODA-421
Added some localization stuff to documentation

ODA-359: model_hspf: Fixed possible nullpointer exception.

Added functionality to handle the model's missing values

Made the BMI model's state directories (in and out) configurable

Adding missing part of commit.

Updated model BMI xsd schema.

Work in progress: added first implementation of data object for D3D map file (not working yet)

Added dataobject for Sobek3 netcdf history files

Fix in test-support initialization

Fix update of buffered exchange items from BMI model exchange items.

ODA-360: WdmTimeSeriesTest: fixed unit test.

ODA-360: WdmUtils: Improved error message.

Enabled announceObservedValues.

Revert of accidental commit.

ODA-435
Created module wrapper-utils for sharing code with other projects.

Made variable names for station id and station dimension configurable. Added NetcdfDataObjectDelft3DTrih that uses this feature.

Various fixes in time handling of BC file, additional commit

Various fixes in time handling of BC file. Removed own MjdUtils. Rename DHydro to dimr.

Fixes in accessing RtcTools from d_hydro config file

Fix in checking resulting xml file

Additional commit to commit 414. IntelliJ project now builds again.

Updated reference testdata for model_hspf

COrrections to UciUtil number formatting in write method.

Changed UciUtil number formatting in write method.

Update jna version from 3.3 to 4.2

Add matrix support to python resultwriter.

Modified one output to the resultwriter from the EnKF.

Removed an output file from a delft3d test.

Issue: ODA-434
Add timeseries of Delft3D output in NetCDF format. Test does not work.

ODA-431
Restore selections object after handing multiple timesteps in buffer EIs for AEnkf.

ODA-433
Added jar for StringUtils suport.

ODA-433
Move to and partial implementation of IDataObject for D3dWindFile.java and IExchangeItem for D3dWindExchangeItem.java.

ODA-433
Commit of minor changes before switching from IoObjectInterface to IDataObject implementation.

ODA-434
Added unit_test_info file to enable units testing.

Added Open Source headers to model Delft3D.

ODA-431
Further implementation of announceObservedValues.
Updated getValues for AEnkf.
Create and update buffer EIs for BmiStateExchangeItems.

ODA-360: UciStateDataObject: Changed mapping of parameterIds for QUAL-INPUT tables. The parameterId is now augmented with the number of the QUAL-INPUT table (determined by the order of appearance of the 
QUAL-INPUT tables within the section in the UCI file) instead of the qualId. This is needed, because the external parameterIds in the WDM files written by the HSPF model cannot be longer than 6 characters.

ODA-382
Added missing makefile

IDataObjects for d_hydro config file now also accesses RtcTools run time configuration file

Add IDataObjects for RtcTools run time configuration file. Adjusted d_hydro config file implementation (now accesses md1d file)

ODA-360: UciStateDataObject: Fixed unit tests.

ODA-360: UciStateDataObject: Added mapping for qualIds.

ODA-360: UciStateDataObject: Added support for reading/writing QUAL-INPUT tables.

ODA-360: UciStateDataObject: write header rows only once for each table.

ODA-360: DataCopier: write log messages also to ResultWriter instead of only to System.out.

Issue: ODA-346, ODA-414
Add AIX binaries.

Issue: ODA-346, ODA-414 Add linux binaries

Issue: ODA-346, ODA-414
Add windows binaries.

Issue: ODA-346, ODA-414
Fix bug when enlarging CSER time series and not storing new size.

Issue: ODA-414
Revert change by GeoSR that cause division by zero exception.

ODA-360: UciStateDataObject: Added support for tables SSED-INIT, NUT-ADSINIT and IWT-INIT with different column header format.

ODA-360: UciStateDataObject: refactoring.

ODA-360: UciStateDataObject: Corrected supported tables.

ODA-360: UciStateDataObject: minor refactoring.

ODA-365: EfdcScalarTimeSeriesExchangeItem: Added error message when input values are missing.

Issue: ODA-346
Fix Makefile.aix for missing object file.
Lowercaser .FOR extension in model_init_2.FOR.
Add dtime.for required on AIX.

Issue: ODA-346
Add linux32_gnu and linux64_gnu binaries.

Issue: ODA-346
Fix incorrect logging output regarding active exchange items for EfdcFortranDLL.dll.
Comment pause statement (was used for debugging).

Updated Castor zips for EFDC and WFLOW.

Support boundaryProvider for EFDC by accepting the absence of EFDC inputExchangeItems for existing EFDC boundaryExchangeItems, assuming there are boundaryProvider ExchangeItems in stead.

Implement IModelExtensions.

ODA-349: EfdcModelInstance: Removed hack: pass useGateWaterLevel in constructor instead of using hacked parentFactory.

Fix Test names

Extend IModelExtensions with the method announceObservedValues, to let BmiModelInstance be able to determine the results to be provided at the end of an asynchronous filtering step.

Issue: ODA-346
Fix issue in supports_exhange_item where exchangeItemID 702 was not supported.

ODA-360: comments only.

ODA-360: comments only.

ODA-360: UciStateDataObject: Added optional argument state time shift. This can be used e.g. when the absolute state time is the end time of the model run, 
but the output state of the model is only available for the last output time step before the end time of the model run.

ODA-360: WdmUtils: Fixed bug where attributes from WDM files were read incorrectly. See model_hspf/doc/WDM_attributes.xlsx or 
https://github.com/djlampert/PyHSPF/blob/master/src/pyhspf/core/wdmutil.py for information about the location (indices and lengths) of the different 
attributes in the WDM file attribute memory. This can be used to read specific attributes directly.

ODA-360: UciStateDataObject: Added reading and writing of QualProps tables.

ODA-360: UciStateDataObject: minor refactoring.

Reminder of vcredist_x64.exe

ODA-415
Provide data through BMI for each model timestep when filtering.

Reset headers.

Moved FileComparer class to core utils

Fix constructors

ODA-422
Added option to use wildcards in the result writer
Added test for the wildcard *

ODA-423
Remove :oda from <openDaApplication xmlns:oda="http://www.openda.org" in the exercises
fix copy functionality from the course documentation
fix plot_movie in exercise 3

ODA-420
Add Save As option to the GUI
If the reference from the oda file to a xml file is changed, refresh the gui
Minor documentation issues.

Fix in DUD algorithm's upper and lower bounds handling

ODA-360: UciStateDataObject: Shifted times of exchangeItem by one hour, because the data for the last timeStep of the model is written at (endTime - 1 hour) in the model output wdm files.

ODA-360: Added documentation about HSPF state variables.

ODA-360: Reverted changes from commit:
326: ODA-360: model_hspf: WdmUtils: Fixed bug where value for endTime was not read. Also fixed unit test.

ODA-360: UciStateDataObject: Fixed location id prefixes.

Minor fix in logging of SCE configuration

Correct SCECoreOptimizer: nCostEvaluation++ is moved earlier in the function so that it will be executed immediately when the function is called.

ODA-360: WdmUtils: Comments only.

ODA-360: WdmUtils: Fixed bug where it was not possible to write data to an empty dataSet in a wdm file.

ODA-360: UciStateDataObject: Fixed bug when SNOW-INIT1 and SNOW-INIT2 tables are present in both PERLND and IMPLND sections in uci state file.

ODA-360: SortUtils: Fixed bug in SortUtils#findMatchingIndex when values is empty array.

ODA-360: UciStateDataObject: Fixed bug where comma's were used as decimal symbols instead of points.

ODA-360: UciStateDataObject: Improved error message.

Added logging of directory with optimal results to some of the algorithms

Fix in writing/reading .orp file

Fix in SCE algorithm's upper and lower bounds handling

Added Conversion for TimeStep (in Md1dFile) from seconds to days and back
(since all values in ExchangeItems should be in MJD scale)

Implemented axpyOnValues and multiplyValues methods on BcExchangeItem
Added Tests

ODA-189

Various bugfixes in NEMO wrapper. Support for handling localization in augmented state (observation locations) when assimilating the observatins one at a time

ODA-419

Extended interface for (temporarely) handling localization (Cohn) combined with assimilating the observations one at a time. 
NOTE: the weights in the observer SHOULD corresponds to those in the model.
This is directly why this setup is far from ideal, will probably be removed in the future when we reimplement localization in OpenDA!

Refactored FileComparer class to compare both Ini and Xml files
Renamed Md1dTimeInfoExchangeItem to Flow1DTimeInfoExchangeItem since it is used by both Md1dFile and DHydroConfigFile
Completed implementation of DHydroFile (and tests)
Removed unnecessary mock classes in tests for BcFileTest and Md1dFileTest

Md1dTimeInfoExchangeItem now throws RuntimeError if trying to update TimeStep
Also added enum for PropertyIds since D_HydroConfigFile will also use this IExchangeItem

Added Md1dFile reader/writer and tests
Refactored ModifiedJulianDay code and tests into new class MjdUtils

Added setting value to ConfigTree

OpenDaTestSupport: minor refactoring.

Fix date formatting bug

Fix logical error

Added first implementation of d_hydro_config.xml IDataObject

Refactored BcFile Read and Write code to new BcFileReaderWriter class
(Had to made BcCategory, BcProperty, and BcQuantity classes public)
Added a test to check that data modified in the IExchangeItem is correctly updated in the BcCategory before being written to file

Added BcFile (implements IDataObject) and BcExchangeItem classes
Including BcUtils for Time conversions and Tests

ODA-401: WflowModelInstance: Fixed ids in scalar output exchange items.

Issue: ODA-346, ODA-414 
Add extra columns to GATECTL.INP GC4 to match new implementation.

Issue: ODA-346, ODA-414
Update makefiles to include SCANTAB.for.
Add linux binary.
Uppercase input files for model_layers test data.
Fix incorrect format in write statement.

Issue: ODA-346, ODA-414 
Merged recent changes from Nier/GEOSR to EFDC dll.
These need updated config files.
Added ControlsGateOpeningHeight exchangItem.

ODA-360: model_hspf: WdmUtils: Fixed bug where value for endTime was not read. Also fixed unit test.

ODA-360: UciStateDataObject: Added support for PERLND and IMPLND init tables.

ODA-359: DataCopier: Fixed bug where DataCopier as an action in a blackBoxWrapperConfig could not be used for files on different hard drives.

ODA-382
IoObject called ASCIIVectorIoObject that interfaces with files containing a simple ASCII dump of a single vector (one value on each line)

Added forcing update to compute step.

ODA-360: model_hspf: Added unit test WdmTimeSeriesTest#testConvertWdmToUciWithDataCopier.

ODA-360: UciStateDataObject: Added state time argument.

ODA-382
EWPF various improvements, algorithm work for Lorenz model (with example and script for preparing observations)

ODA-360: DoubleExchangeItem: Implemented copying data from IArrayType exchange items for current time. Also added unit test WdmTimeSeriesTest#testConvertWdmToUciWithDataCopier.

ODA-364: Corrected check.

ODA-360: DataCopier: Changed exception when input exchangeItem cannot be added to output dataObject to warning message.

Comments only.

ODA-360: model_hspf: Fixed locationIds.

Attempt to support boundary netcdf grid input in performOperation (2).

Attempt to support boundary netcdf grid input in performOperation.

Arrays.asList does not work as advertised.

Load is not save.

ODA-344: BBStochModelInstance: refactoring, simplified code.

ODA-344: BBStochModelInstance: Moved code for handling grid observations from BmiModelInstance to BBStochModelInstance, so that this can be used in combination with the id mapping in the stochModelConfig. This was needed to be able to handle grid observations in case there is more than one model exchange item or more than one observation exchange item. BmiModelInstance now also works for scalar observation exchange items.

ODA-344: Fixed bug where IoObjectStochObsDescriptions was using selectedTimeIndices from the IoObjectStochObserver in which it was created instead of the selectedTimeIndices passed in its constructor.

ODA-410: Corrected openda.ipr file.

ODA-360: model_hspf: Extended UciStateDataObject to support writing state variables.

ODA-410
Updated the Restartwrapper for latest dflowfm code

ODA-410
Added exercise for course: dflowfm enkf

Issue: ODA-410
Finalize questions for the dflowfm estuary_calibration exercise

Issue: ODA-410
Added calibration if tidal constituents to dflowfm wrapper.

Issue: ODA-410\n
Small changes to DoubleExchangeItem and PointGeometryInfo for dflow-fm tide calibration.

Issue: ODA-410
Small changes for model_dflowfm tests.

Issue: ODA-410
Improved estuary calibration exercise for model_dflowfm.

ODA-327: model_bmi: Updated WFLOW python test files to revision 489 from https://github.com/openstreams/wflow.git/trunk

ODA-360: model_hspf: Added UciStateDataObject. This currently only supports reading state variables.

ODA-365: EfdcModelInstance: If for a given location and parameter there is only one inputExchangeItem and multiple boundaryExchangeItems for multiple layers, then the values of that inputExchangeItem are copied to the boundaryExchangeItems for all layers.

ODA-365: Fixed unit tests.

Issue: ODA-410
 Add missing initial history file for dflowfm estuary_kalman case

ODA-365
Fix return value of get_layer_depths

ODA-327: model_bmi: Updated bmi.py interface to most recent version from https://github.com/eWaterCycle/bmi/blob/master/src/main/python/bmi.py

ODA-365: EfdcGridExchangeItem: only return TreeVector if multiple layers.

ODA-365: EfdcGridExchangeItem: fixed dimensions in wrong order.

ODA-327: model_bmi: Updated WFLOW test files to most recent development version from https://github.com/openstreams/wflow.git/trunk

ODA-365: EfdcScalarTimeSeriesExchangeItem: add layerNumber to locationId instead of parameterId.

ODA-365: NetcdfUtils: write z coordinates in netcdf files for LayeredIrregularGridGeometryInfo.

Issue: ODA-410
Adjust estuary_kalman test of dflow for course material

ODA-327: Fixed unit test.

ODA-327: OpenDaTestSupport: fixed out of memory errors when comparing netcdf files in text format.

ODA-327: model_bmi: Updated WFLOW test files to most recent development version from https://github.com/openstreams/wflow.git/trunk

Issue: ODA-365
Separate EfdcScalarExchangeItems are created for each location and layer (eg. with id 12.Discharge_layer2)
Add a method to get layer depths from EFDC.
Two new unit tests for exchange items for quantity with layers. 
Add a model with 5 layers to the testData for new unit tests.

ODA-411: Use wildcard in classpath in batch files to run OpenDA. This is needed because otherwise the java command becomes too long for Windows (error "The input line is too long") if the OpenDA bin dir has a long 
path and contains many jar files.

ODA-327: model_bmi: Updated WFLOW test files to most recent development version from https://github.com/openstreams/wflow.git/trunk

ODA-360: model_hspf: Added new UciDataObject for writing start and end time in uci file without using tags.

Dflow-fm kalman estuary test update

ODA-327: model_bmi: Updated bmi.py interface to most recent version from https://github.com/eWaterCycle/bmi/blob/master/src/main/python/bmi.py

Issue: ODA-379
Add last two times to noise exchange item.
Plot confidence interval for Enkf results.

Issue: ODA-379
Fix incorrect timestamps in D-Flow FM tim boundary time series.

ODA-359: BBModel: Added option idSuffix in exchangeItem in blackBoxModelConfig xsd schema. This way can still use id="allElementsFromIoObject" when the elementIds differ only from the ids by a fixed suffix.

ODA-359: DataCopier: Added log messages.

ODA-359: BBUtils: Fixed bug where exceptions in method BBUtils#startAndWait were completely ignored.

ODA-359: DataCopier: Implemented IConfigurable in DataCopier, so that DataCopier can be used as an action in a blackBoxWrapperConfig. This was needed because the instanceDir for a BBAction cannot be passed to the main method of a Java 
class in any way. For this had to refactor DataCopier.

Issue: ODA-410
First working version of dflowfm estuary calibration exercise

Issue: ODA-410
Update of dflow-fm test case

ODA-365: NetcdfDataObject: Added LayeredIrregularGridGeometryInfo for writing 2D grids with horizontal layers. This is currently only used for EfdcGridExchangeItem.

ODA-359: model_hspf: WdmUtils: If stationName is empty, use location.

ODA-359: BBUtils: Fixed bug where it was not possible to run main method from a class without an empty constructor that was configured as an action in BBWrapper.

Issue: ODA-409
Add missing xml declarations. 

Issue: ODA-407
Remove incorrect localization for tests/native_parallel_from_examples/EnkfAlgorithm.xml

Issue: ODA-407, ODA-409
Remove incorrect localization (Hammil) for simple_lorenz96.
Add schemaLocation to most xml files for simple_lorenz96

ODA-327: model_bmi: Switched off unit tests that fail on Teamcity because Python, PCRaster, PCRGLOBWB, THRIFT and/or ssh are not installed.

Issue: ODA-407
Throw an error when configured localization type is invalid (instead of switching to none).
Fix typo from Hammil to Hamill.

ODA-402: model_bmi: merged kockx_drost_model_bmi_20150324 branch into trunk (from commit 258).

ODA-359: NetcdfUtils: Fixed bug when writing scalar time series with different times to the same netcdf file.

ODA-359: NetcdfUtils: refactoring.

ODA-360: Added WdmTimeSeriesDataObject that can be used with DataCopier. WdmTimeSeriesIoObject is still needed for backwards compatibility with old configurations.

ODA-359: NetcdfDataObject: added code for writing scalar ensemble time series exchange items. Also it seemed more logical to store ensembleMemberIndices per exchangeItemId instead of exchangeItemIds per 
ensembleMemberIndex, because in theory different exchangeItemIds can have different sets of ensembleMemberIndices (this is not implemented currently, but may need to be added in future).

Issue: ODA-365 Update Linux binaries

Issue: ODA-365
Changed dll to support 3d data (actually 2d arrays are passed, with dimension cellcount and layercount).
Add getLayerCount and getCellCount methods.
Change exchangeItems from Vector to TreeVector.
Updated unit tests for new functionality. 

ODA-406: DataCopier: now also works for output NetcdfDataObjects with lazyWriting = false.

ODA-401: NetcdfDataObject: Fixed bug when writing scalar time series.

ODA-401: NetcdfDataObject: refactoring. In addExchangeItem always create a new internal exchangeItem that matches the given external exchangeItem. This internal exchangeItem can then be used later to copy data from the matching external exchangeItem.

ODA-401: NetcdfDataObject: refactoring. Also never use standard name or long name as exchangeItemId, since these are not always unique within a netcdf file.

ODA-401: refactoring.

ODA-401: NetcdfDataObject: minor refactoring.

ODA-365: model_efdc_dll: Removed EfdcNetcdfDataObject and EfdcNetcdfScalarTimeSeriesExchangeItem. Instead use NetcdfDataObject with arguments "lazyReading=true" and "lazyWriting=false".

ODA-401: NetcdfDataObject: refactoring.

ODA-359: WdmEnsembleTimeSeriesOutputDataObject: changed input file name pattern.

ODA-364: review.

ODA-401: Comments only.

ODA-401: Added NetcdfScalarExchangeItemWriter for writing scalar data to a netcdf file per time step using an unlimited time dimension. Also in kockx_drost_model_bmi_20150324 branch.

ODA-401: Added AnalysisDataWriter for writing data from model state exchange items before and after analysis (state update). This can be easily used e.g. in any ModelInstance implementation. Also in 
kockx_drost_model_bmi_20150324 branch.

ODA-405
An Internal compiler error (intel fortran 14 linux) is caused The combination of the (automake) macro F77_FUNC in combination with a fortran ISO binding f90 routine seems to trigger this issue.  Since I want to get rid of the F77_FUNC stuff (creating routines that match you fortran compiler) and replace it with proper ISO binding stuff (allows you to use an pre-compiled OpenDA version), I do not spent too much time in this issue
 Solution
 -> Remove the F77_FUNC macro and set default to what almost always works (lowercase_)
 ->Using a configure flag you can change it into uppercase.
 ->If you have a very creative fortran compiler just change the macro include/cta_system.h

ODA-401: Changed EfdcModelInstance to use NetcdfGridExchangeItemWriter for output.

ODA-401: Changed WflowModelInstance to use NetcdfGridExchangeItemWriter for grid output.

ODA-401: Added NetcdfGridExchangeItemWriter for writing grid data to a netcdf file per time step using an unlimited time dimension. Merged from kockx_drost_model_bmi_20150324 branch.

ODA-401: Removed redundant code.

Issue: ODA-404
Add validate-xml option to build.xml. This uses the schemaValidate ant task. 
For now only checks for model_dflowfm_blackbox xml files are enabled.

Issue: ODA-376
Add missing schemaLocation to config files.

Issue: ODA-376
Make all xml config file validate against their xsd schema.
Remove unused alias openda_bindir.

Devision by zero exception.

Issue: ODA-398
Added svn build number to meta info in model_dflowfm_blackbox.
Merge OpenDA 2.2 branch rev 4868

ODA-364
Added ensemble support to NetcdfGridTimeSeriesExchangeItem for NetcdfDataObject.

ODA-364
Fix due to failing test: Added a second constructor.

ODA-364
Added ensemble support to NetcdfScalarTimeSeriesExchangeItem for NetcdfDataObject.

ODA-364
Moved dataObject creation to the factory.

ODA-397
Documentation for D_Flow FM 0.9

ODA-364
Additional checks.

ODA-394

Bug in TreeVector implementation. In some situation (Treevectors with almost same structure but just one extra TV layer) computations were performed twice, yielding erronimous results or only double work. Problem has been fixed and unit tests have been added (which should trigger the bug in older versions of OpenDA).

Affected methods:

The bug was present in various methods like 
*pointwiseMultiply
*pointwiseDivide
*dotProduct (more work but correct results)
*axpy

Note: bug was only triggered in localization related stuff combined with black box models as far as I could figure out.

ODA-364
Implemented execution of operations specified by boundaryProviders.

ODA-359: DataCopier: Extended DataCopier so that it can also copy ensemble exchange items. This is needed to convert ensemble wdm files to an ensemble netcdf file using WdmEnsembleTimeSeriesOutputDataObject and NetcdfDataObject. Also added unit test WdmTimeSeriesTest#testConvertEnsembleWdmToNetcdfWithDataCopier. Also added new interface IComposableEnsembleDataObject.

ODA-359: DataCopier: minor refactoring.

ODA-359: Changed WdmEnsembleTimeSeriesOutputIoObject to WdmEnsembleTimeSeriesOutputDataObject so that it can be used with DataCopier.

ODA-359: Fixed unit test.

ODA-359: WdmEnsembleTimeSeriesOutputIoObject: implemented new interface IEnsembleDataObject.

ODA-364: Made reading of input files in EfdcModelFactory and WflowModelFactory optional. This should be switched off when the new boundary provider is used.

ODA-364: Updated new interface IEnsembleDataObject. Ensemble ids must always be integer indices. Explained further restrictions in comments.

ODA-364: Added new interface IEnsembleDataObject that contains methods for filtering exchangeItems using ensembleMemberIds. This can be implemented by 
DataObjects or IoObjects as an additional interface.

ODA-359: model_hspf: Added unit test for WdmEnsembleTimeSeriesOutputIoObject.

ODA-359: model_hspf: Added new WdmEnsembleTimeSeriesOutputIoObject and EnsembleMemberExchangeItem to read ensemble output files from MLEF-HSPF model setup.

ODA-359: WdmTimeSeriesIoObject: minor refactoring.

ODA-359: WdmTimeSeriesIoObject: Improved performance. Do not open/close wdm file for each read separately.

ODA-359: WdmTimeSeriesIoObject: Improved caching of dataSetNumbers for time series.

ODA-359: WdmTimeSeriesIoObject: Improved performance by caching dataSetNumbers for time series.

ODA-364: Fixed build. Use HashMap instead of list of Pairs, this also improves searching speed.

ODA-359: WdmTimeSeriesIoObject: Added option to create exchange items directly from a wdm time series file. Also added unit test for this.

ODA-359: WdmUtils: minor refactoring.

ODA-359: WdmUtils: minor refactoring.

ODA-359: BBModelInstance: Added support for option "allElementsFromIoObject" to methods BBModelInstance#getExchangeItemIDs() and BBModelInstance#getExchangeItemIDs(IPrevExchangeItem.Role).

Issue: ODA-364
Remove java language level 7 'Diamonds'. Fixed some typos and idea suggestions

Issue: ODA-393
Merged revision(s) 4856 from (previous repos)/public/branches/OpenDA_2_2:
Changed target framework to .Net 4.0

Issue: ODA-364
Added pseudo code in stoch. model factory and stoch. model instance code.

Issue: ODA-364
Added configuration classes for boundary providers to stoch. model code.

Updated descriptions in openda:BoundaryProvider.

Issue: ODA-364
Added specification of (noise) boundary conditions to stoch. model config. file.

Issue: ODA-392
Added fixed/random/specify seed to oda, config, which is fed to the StochVector settings.

Added (empty) resources directory (needed for ant build script)

Issue: ODA-391
First step: replaced unused timeAccuracy's by OdaGlobalSettings.getTimePrecision. Time class yet to do.

ODA-390

    Added the matlab wrapper for a runoff model developed by Beatrice Marti

    Some additions for compiling/testing in the OpenDA framework
    Some minor changes to make the code woring on an arbirtary (Mac) computer.
    
    TODO: Flexible/automatic selection of matlab
    TODO: See if example works in octave
    TODO: Make example running on Linux/Windows as well

ODA-390

    Added the matlab wrapper for a runoff model developed by Beatrice Marti

    Some additions for compiling/testing in the OpenDA framework
    Some minor changes to make the code woring on an arbirtary (Mac) computer.
    
    TODO: Flexible/automatic selection of matlab
    TODO: See if example works in octave
    TODO: Make example running on Linux/Windows as well

Issue: ODA-389
A bit more cleaning up for the course

Issue: ODA-139
Add more python stuff for course

Issue: ODA-389
Add python scripts for exercise 3

Issue: ODA-389
Finish python scripts for exercise 1 of course

ODA-267
Add linux binary for commit in r161
Set svn:ignore property

ODA-267
Fix issue when enlarging time series and arrays where values are taken from the EFDC input files.
Model arrays were enlarged but the values not restored.
Error did not occur for arrays set by exchange items.

Issue: ODA-370

Issue: ODA-389
Add python plotting to course document

Issue: ODA-389
Add script with plotting commands for exercise 1

ODA-389
Course: fixed EnKF2.oda file for writing python files

Issue: ODA-389
Python stuff for course exercise 5

Issue: ODA-389
Python scripts for exercise 4 of course

ODA-327: model_bmi: Moved time conversion methods to TimeUtils and added unit tests. Also in kockx_drost_model_bmi_20150324 branch.

Updated openda.ipr file.

ODA-327: model_bmi: Added code to convert times from MJD to model time units. Also in kockx_drost_model_bmi_20150324 branch.

ODA-327: model_bmi: Added code to convert times from model time units to MJD. Also in kockx_drost_model_bmi_20150324 branch.

ODA-382: Fixed JDK version in openda.ipr file.

ODA-327: ApplicationRunner: Fixed bug where algorithm.finish was not called when an exception was thrown during a run.

Issue: ODA-389
Add PythonResultWriter similar to MatlabResultWriter

ODA-327: model_wflow: Added log messages.

Comments only.

ODA-293: OpenDaInFews: Fixed bug: do not flush dataObjects in methods BBModelInstance.finish and BBModelInstance.restoreInternalState. This way can safely call IModelInstance.finish in OpenDaInFews.

ODA-381
Course: Updated documentation, modern noise model for pollute model

ODA-376
Use run_dflowfm.sh (available from module dflowfm) script for running D-Flow FM on linux.

ODA-381
Moving exercises

ODA-381
Moving exercises

ODA-382

Updates EWPF filter implementation

ODA-338

Initial implementation. The user can now select native vectors beeing default.

Issue: ODA-370
Deactivate some model efdc_dll tests for linux. To check which other tests are failing as a consequence

ODA-383 rm unused stochobserver dir

ODA-327: Merged into trunk changes from commit 82 (Added method OpenDaTestSupport.compareNetcdfFileInTextFormat).


Updated openda.ipr file.

ODA-376
Rename start_unstruc.* scripts to start_dflowfm.*

ODA-376
Add missing stochObserver config for lake_kalman

ODA-379
Fix Locale related issues.

ODA-376
Add output folder.

ODA-376
Add test with dcsmv5 model and wind grid noise.

ODA-376
Add restart file to lake_kalman test.

ODA-379
Fix time accuracy when using tunit H or M in the DFlowFM mdu file.
Remove workaround for incorrect 'salt' variable in DFlow map file. 

ODA-377
Set Locale for DFlowFMMeteoFile to US.
Fix indentation

ODA-219
Fix issue with storing GATSER timeseries for multiple instances, where all instances with id > 0 contained zeros for the columns that are not set by an exchange item.

Issue: ODA-370
Activate one more efdc_ddl tests for linux, to avoidn crashes lateron

Issue: ODA-370
Activate more of the junit tests in eclipse

Issue: ODA-370
Fix spatialCorrelationTest. There was a singulatity in the computation.

Issue: ODA-370
Deactivate some tests for linux. They can crash later unrelated tests.

ODA-387
Fixed some unit tests of NEMO wich failed after bug have ben fixed. (Note: the unit tests tested for wrong answers.)

Issue: ODA-370
Add build before junit testing.

Issue: ODA-370
Small change to reference file for comparison (0.0090 to 0.009). The fundamental problem that tiny changes to numbers cause textual differences is not solved.

Issue: ODA-370
Update linux64_gnu binaries for native part.

Issue: 0DA-370
Add xmlSchemas dir to model_dflowfm_blackbox

Issue: ODA-370
Turn of svn revision check for model_reactive_advection. To avoid java PermGen error.

Issue: ODA-370
Some fixes for ant zip

Issue: ODA-370
Add more memmory for ant at toplevel

Issue: ODA-370
Build for model_wflow fails with lack of memmory

Issue: ODA-370
autoreconf script potentially in wrong place?

Issue: ODA-370
Run autoreconf fix always.

Issue: ODA-370
Remove references to 32bit linux in build.xml

ODA-381

Fixed many (tiny) things to make the course work again with latest OpenDA code + chaned pollution model such that students no longer need to compile it but direclty use the version of the OpenDA distro

Issue: ODA-370
Run autoreconffix.sh to create working Makefile.in files.

ODA-383 Fix issue failing GotmProfileFileTest due to with whitespace difference.

Issue: ODA-370
Add EFDC dll for linux64_gnu

Issue: 370
Module settings for bash were not working. New attempt.

Issue: ODA-370
Set module explicitly

ODA-377
Updated lake_kalman example using the new meteo file dataobject. 

Issue: ODA-370
compile script was a softlink

Replacing : /trunk/core/native/compile

Issue: AODA-370
Compilation failing on teamcity because of reference to DLFow, but the link is not actually used.

Issue: ODA-370
Linux build problem.

Issue: ODA-370
First compile native linux on h5devux.

Issue: ODA-370
First compile native linux on h5devux.

Issue: ODA-370
First compile native linux on h5devux.

Issue: ODA-370
Move build commands for teamcity to a script.

Issue: ODA-370
Changed EOL markings for linux build script.

Issue: ODA-370
Made shell scripts executable again

ODA-219
Fixes for time precision in EFDC, which caused crashes on AIX.

ODA-381

Fixed oda input files for exercise 1 and 2 (new result writer config resulted in not enough output)

ODA-383 Add bin_external directory

ODA-383 Add module.properties

ODA-383 Add missing stochModel config files for gotm calibration example

ODA-383 
Change hash bang in python scripts from python3 to python

ODA-383 Initial commit for GOTM model wrapper

ODA-382
Added SANGOMA tools to OpenDA native code: 

URL: svn://svn.code.sf.net/p/sangoma/code/tools
Repository Root: svn://svn.code.sf.net/p/sangoma/code
Repository UUID: aa0e3a14-2027-4f0a-a389-0d605c8c41ab
Node Kind: directory
Schedule: normal
Last Changed Rev: 635

ODA-381
Copy of the course directory from the old repository

ODA-380
Normal localization for NEMO model. First implementation working for SSH.

Issue: ODA-376
Enable salt in simplewaal_salt.mdu

Issue: ODA-379
Fix mixed use of spaces and tabs in source files.

Issue: ODA-377
Add unit test for Meteo files.

Issue: ODA-377
Check the Meteo file header contain n_rows, n_cols and quantity1 keys.
Check the filetype is equal to meteo_on_equidistant grid. 

Issue: ODA-377
Add dataobject for FlexMesh meteo files on a equidistant grid.

Issue: ODA-373
Deprecate DFlowFMFriction* classes.

ODA-373
Rename classes DFloFMFriction* to DFlowFMXyz*
Exchange item groups are defined with a template file or a comment in the fourth column.
Exchange item id are constructed form xyz file basename
Exchange item id numbering uses actual number in xyz template file.
Values in the file are not overwritten with ones.
Update tests/simple_waal_calibration_roughness to use new class names.
Update tests/simple_waal_calibration_roughness to use xyz template file.

Fix typos in method javadoc.

ODA-279

Minor fixes in documentation and comments

Issue: ODA-373
Change .bat files to call dflowfm.exe instead of unstruc.exe
(note that executable is not included in OpenDA)

ODA-375
Empty model extensions for the reactive advection model

ODA-374
Looking to the results of the reaction_advection model we noticed a strange periodical drop in standard deviation of the ensemble.

The problem is caused by a rounding issue in 
private void propagateNoiseModelsAndAddNoiseToExchangeItems(ITime currentTime, ITime targetTime) 

In matching the model times to noise model times we have a test

if(time>this.lastNoiseTimes.get(modelExchangeItemId)){

When the noise model and model make the same time steps, this test is very likely to give an unwanted result due to timy rounding errors. Is should be changed into 

if(time>this.lastNoiseTimes.get(modelExchangeItemId)+0.5*timePrecision){

Taking roudning errors into account. The factor 0.5 is used as an additional safeguard since times are compared (using timePrecision) within the if block.

Fixed many issues with C# stoch observers.ODA-279
C# Observers fixed many issues
Bias correction now works with observers providing "name"of "id" as property in order to get the obs ID

ODA-279
C# wrapping: C# Observers can be used for localization as well for C# models without a translation step
